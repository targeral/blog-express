# 关于Ajax应用开发注意的事项

## 1、编码问题
注意Ajax要取的文件是UTF-8编码的。GB2312编码传回browser后中文会乱码。如果用VBscript的haunt还可以转化，但是VBscript只有IE支持。

所以，选择UTF-8编码是一劳永逸的办法


## 2、清除服务端文件的存缓
当用XMLHTTP取回一个服务端的文件，文件会存缓在浏览器端。下次再取文件时，不会再去服务器取文件。所以，对于刷新频繁的文件，一定要指定文件的过期时间。


## 3、什么时候使用XML
Ajax里的X指的是XML，可是真的XML就是最好的解决方案吗？XML和JSON相比，在传递相等量的信息时，XML文件更大。所以往往JSON是更好的选择。不过，你还可以直接输出JavaScript执行，这样的效率往往更高:不需要写复杂的回调函数。不过安全问题也要更加注意。


## 4、两种Ajax的方式(这个借鉴过来的)
最古老的一种是iframe来加载一个包含js的网页，这个网页里的脚本用 top.function来调用parent页面里的函数。但是，你可以指定a的target和form的target，这样就不用序列化表单，实际上能 很方便地发送表单。当然后期就稍微有点麻烦，出现问题也不容易解决。

后来就是xmlhttp组件的方式。什么时候挑选什么方式，这也是一种技巧。


## 5、安全问题
在服务器端，虽然客户端能预处理很多东西，你仍要注意一句话：一切来自客户端的变量都是有害的。不在Ajax的情况下很多程序员往往会放松警惕。这使得安全问题更隐蔽。如果是开源程序的话那么问题就会在网友面前马上暴露出来；黑盒的情况下，往往被入侵了还是找不出原因。