# 10个提升JavaScript性能的技巧

## 1.定义局部变量


## 2.不要使用with()语句

这是因为 with() 语句将会在作用域链的开始添加额外的变量。额外的变量意味着，当任何变量需要被访问的时候，JavaScript引擎都需要先扫描with()语句产生的变量，然
后才是局部变量，最后是全局变量。因此with()语句同时给局部变量和全局变量的性能
带来负面影响。


## 3.小心使用闭包

注意，不要在循环中使用闭包


## 4.对象属性和数组元素的速度比变量慢

在考虑优化时，数值和变量的性能差不多，并且速度显著优于对象属性和数组元素。

因此当你多次引用一个对象属性或者数组元素的时候，你可以通过定义一个变量来获取
性能的提升。

## 5.不要在数组中挖得太深


## 6.避免for-in循环(和基于函数的迭代)

要遍历一个集合内的元素，如果使用for-in不仅仅可能需要遍历额外的数组项，还需要
更多的时间。

为了遍历这些元素，JavaScript需要为每一个元素建立一个函数，这种基于函数的迭代带了一系列性能问题:额外的函数引入了函数对象被创建和销毁的上下文，将会在作用域链的顶端增加额外的元素。


## 7.在循环时控制条件和控制变量合并起来


## 8.为HTML集合对象定义数组


## 9.不要碰DOM！

不使用DOM是JavaScript优化中另一个很大的话题。经典的例子是添加一系列的列表项：如果你把每个列表项分别加到DOM中，肯定会比一次性加入所有列表项到DOM中要慢。这是因为DOM操作开销很大。

Zakas对这个进行了细致的讲解，解释了由于回流（reflow）的存在，DOM操作是非常消耗资源的。回流通常被理解为浏览器重新选渲染DOM树的处理过程。比如说，如果你用JavaScript语句改变了一个div的宽度，浏览器需要重绘页面来适应变化。

任何时候只要有元素被添加到DOM树或者从DOM树移除，都会引发回流。使用一个非常方便的JavaScript对象可以解决这个问题——documentFragment，我并没有使用过，但是在Steve Souders也表示同意这种做法之后我感觉更加肯定了。

DocumentFragment 基本上是一种浏览器以非可视方式实现的类似文档的片段，非可视化的表现形式带来了很多优点，最主要的是你可以在 documentFragment 中添加任何结点而不会引起浏览器回流。


## 10.修改CSS类，而不是样式